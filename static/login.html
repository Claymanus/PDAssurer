<html>
 <head>
  <meta charset="UTF-8">
  <title>SSO test page</title>
  <script type='text/javascript' src="debug.js"></script>
  <script type='text/javascript' src="script.js"></script>
  <script type='text/javascript' src="fb.js"></script>
  <script type='text/javascript' src="qunit-1.18.0.js"></script>
  <script type='text/javascript' src="qunit-reporter-junit.js"></script>
  <link rel="stylesheet" href="qunit-1.18.0.css">
  <link rel="stylesheet" href="main.css">
 </head>

 <body onload="pageScript.main()" >

  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
<!--script type='text/javascript' src="tests.js"></script-->
			<button type="button" id="Unit_test_button" onclick="javascript:pageScript.unittest()">Run unit tests</button>
			<div class="main">
				<div class="message_container"> <!-- Output container -->
					<table width="100%" >
						<tr>
							<td>
								<p>Státusz</p>
							</td>
							<td>
								<div id="status">
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<p>A szerver válaszüzenete</p>
							</td>
							<td>
								<div id="errorMsg">
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<p>Üzenet</p>
							</td>
							<td>
								<div id="message">
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<p>Felhasználói adatok</p>
							</td>
							<td>
								<div id="userdata">
								</div>
							</td>
						</tr>
					</table>
				</div>
	        	<ul class="tabs">
				
<!-- Tab for login -->
			        <li>
			          <input type="radio" name="tabs" id="tab-login">
			          <label for="tab-login" id="tab-login-label">Login</label>
			          <div id="tab-content-login" class="tab-content animated fadeIn">
						<p>Bejelentkezési lehetőségek</p>
						<hr>
							<table class="content">
								<tr>
									<td width="90%">
										Facebook fiókkal: 
									</td>
									<td>
										<button class="button" type="button" id="Facebook_login_button" onclick="facebook.fblogin()">Facebook Login</button>
									</td>
								</tr>
								<td>
									<td>
										<div id="sslLoginDiv"></div>
									</td>
								</tr>
							</table>
						<hr/>
							<table class="content">
								<tr>
									<td width="90%">
										Google+ fiókkal:
									</td>
									<td>
										hamarosan
									</td>
								</tr>
							</table>
						<hr/>
							<table class="content">
								<tr>
									<td width="90%">
										SSL jogosítvánnyal:
									</td>
									<td>
										<button class="button" type="button" id="ssl_login" onclick="pageScript.sslLogin()">SSL Login</button>
									</td>
								</tr>
								<tr>
									<td>
										<div id="sslLoginDiv"></div>
									</td>
								</tr>
							</table>
						<hr/>
							<form id="loginform" action="javascript:pageScript.login()" method="post" name="login">
								<table class="content">
									<tr>
										<td width="40%">
										Felhasználónév és jelszó segítségével
										</td>
										<td width="25%">
											<div class="formrow">
												<div class="label" id="LoginForm_username_label">
													Felhasználó név:
												</div>
												<input name="username" type="text" id="LoginForm_username_input"/>
											</div>
										</td>
										<td width="25%">
											<div class="formrow">
												<div class="label" id="LoginForm_password_label">
													Jelszó:
												</div>
												<input name="username" type="password" id="LoginForm_password_input"/>
											</div>
										</td>
										<td>
											<div class="formrow">
												<input class="button" type="submit" value="Login" id="LoginForm_submitButton">
											</div>
										</td>
									</tr>
								</table>
								<div id="LoginForm_errorMsg"></div>
							</form>
			          </div>
			        </li>

<!-- Tab for register users -->
					<li>
			          <input type="radio" name="tabs" id="tab-registration">
			          <label for="tab-registration" id="tab-registration-label">Regisztráció</label>
			          <div id="tab-content-registration" class="tab-content animated fadeIn">
						<p>Regisztrálási lehetőségek</p>
						<hr>
						<table class="content">
							<tr>
								<td width="90%">
									Facebook fiókkal: 
								</td>
								<td>
									<button type="button" id="Facebook_registration_button" onclick="facebook.fbregister()">Facebook Registration</button>
								</td>
							</tr>
							<td>
								<td>
									<div id="sslLoginDiv"></div>
								</td>
							</tr>
						</table>
						<hr/>
						<table class="content">
							<tr>
								<td width="90%">
									Google+ fiókkal:
								</td>
								<td>
									hamarosan
								</td>
							</tr>
							<td>
								<td>
									<div id="sslLoginDiv"></div>
								</td>
							</tr>
						</table>
						<hr/>
						<form id="RegistrationForm" action="javascript:pageScript.register()" method="post" name="register">
							<select name="credentialType" type="text" id="RegistrationForm_credentialType_input" style="display: none">
								<option selected="selected">password</option>
							</select>
							<table class="content">
								<tr>
									<td colspan="5" >
										Felhasználónév és jelszó segítségével
									</td>
								</tr>
								<tr>
									<td colspan="4">
										<p class="note">A személyi számot nem tárolja a rendszer. Az "anchor" szolgáltatással egy titkosított un. hash-t (titkos kódot) generálunk belőle, amiből a személyi szám nem nyerhető vissza. 
							A titkos kódot magad is előállíthatod <a class="link" href="https://anchor.edemokraciagep.org"> itt</a>, és akkor be kell másolnod a "tikos kód" mezőbe</p>
									</td>
									<td>
									</td>
								</tr>
								<tr>
									<td colspan="2">
									</td>
									<td>
										<div class="formrow">
											<div class="label" id="RegistrationForm_predigest_label">
												személyi szám:
											</div>
											<input name="digest" type="text" id="RegistrationForm_predigest_input"></input>

										</div>
									</td>
									<td>
										<button class="button" type="button" id="RegistrationForm_getDigestButton" onclick="pageScript.digestGetter('RegistrationForm').getDigest()">Titkos kód létrehozása</button>
									</td>
									<td></td>
								</tr>
								<tr>
									<td colspan="4">
										<div id="RegistrationForm_errorMsg"></div>
									</td>
									<td>
									</td>
								</tr>
								<tr>
									<td colspan="4">
										<div class="formrow">
											<div class="label" id="RegistrationForm_digest_label">
												titkos kód:
											</div>
											<textarea class="digest" name="digest" type="text" id="RegistrationForm_digest_input"></textarea>
										</div>
									</td>
									<td></td>
								</tr>
								<tr>
									<td colspan="4">
										<p class="note">A jelszó hossza minimum 8 karakter, tartalmaznia kell kis és nagybetűket és számot is. A felhasználónév minimum 4 max 255 karakter hosszú</p>
									</td>
									<td></td>
								</tr>
								<tr>
									<td width="15%"></td>
									<td width="25%">
										<div class="formrow">
											<div class="label" id="RegistrationForm_identifier_label">
												* felhasználónév:
											</div>
											<input name="identifier" type="text" id="RegistrationForm_identifier_input"/>
										</div>
									</td>
									<td width="25%">
										<div class="formrow">
											<div class="label" id="RegistrationForm_email_label">
												* e-mail cím:
											</div>
											<input name="email" type="text" id="RegistrationForm_email_input"/>
										</div>
									</td>
									<td width="25%">
										<div class="formrow">
												<div class="label" id="RegistrationForm_secret_label">
													jelszó:
												</div>
											<input name="secret" type="password" id="RegistrationForm_secret_input"/>
										</div>
									</td>
									<td >
										<input class="button" type="submit" value="Register" id="RegistrationForm_submitButton">
									</td>
								</tr>

							</table>
						</form>
						<hr/>
						<p>Regisztráció böngészőben tárolt SSL jogosítvánnyal</p>
						<form id="keygenform" method="post" action="/keygen">
							<div class="formrow">
								<div class="label" id="KeygenForm_pubkey_label">
									a kulcs mérete:
								</div>
								<keygen name="pubkey" challenge="123456789" keytype="RSA">
							</div>
							<div class="formrow">
								<div class="label" id="KeygenForm_email_label">
									e-mail cím:
								</div>
							</div>
							<input name="email" type="text" id="KeygenForm_email_input"/>
							<div class="formrow">
								<input id="KeygenForm_createuser_input" type="checkbox" name="createUser" value="true">Felhasználó létrehozása<br>
							</div>
							<div class="formrow">
								<input id="KeygenForm_submit" type="submit" name="createcert" value="Jogosítvány előállítása">
							</div>
						</form>
			          </div>
			        </li>
					
<!-- Tab for functions belongs to the assurers -->
			        <li>
			          <input type="radio" name="tabs" id="tab-assurer">
			          <label for="tab-assurer" id="tab-assurer-label">Ellenőröknek</label>
			          <div id="tab-content-assurer" class="tab-content animated fadeIn">
						<p>Felhasználó adatainak lekérdezése</p>
						<form id="ByEmailForm" action="javascript:pageScript.byEmail()" method="post" name="byEmail">
							<div class="formrow">
								<div class="label" id="ByEmailForm_email_label">
									e-mail cím:
								</div>
								<input name="email" type="text" id="ByEmailForm_email_input"/>
								<div class="formrow">
									<input type="submit" value="Mutasd" id="ByEmailForm_submitButton"></input>
								</div>
							</div>
						</form>
						<hr/>
						<p>Felhasználó ellenőrzése</p>
						<form id="AddAssuranceForm" action="javascript:pageScript.addAssurance()" method="post" name="addAssurance">
							<div class="formrow">
								<div class="label" id="AddAssuranceForm_predigest_label">
									személyi szám:
								</div>
								<input name="digest" type="text" id="AddAssuranceForm_predigest_input"></input>
								<button type="button" id="AddAssuranceForm_getDigestButton" onclick="pageScript.digestGetter('AddAssuranceForm').getDigest()">
									Titkos kód generálása
								</button>
							</div>
							<div id="AddAssuranceForm_errorMsg"></div>
							<div class="formrow">
								<div class="label" id="AddAssuranceForm_digest_label">
									titkós kód:
								</div>
								<input name="digest" type="text" id="AddAssuranceForm_digest_input"/>
							</div>
							<div class="formrow">
								<div class="label" id="AddAssuranceForm_assurance_label">
									ellenőrzési szint:
								</div>
								<input name="assurance" type="text" id="AddAssuranceForm_assurance_input"/>
							</div>
							<div class="formrow">
								<div class="label" id="AddAssuranceForm_email_label">
									e-mail cím:
								</div>
								<input name="email" type="text" id="AddAssuranceForm_email_input"/>
							</div>
							<div class="formrow">
								<input type="submit" value="Tanusítvány kiadása" id="AddAssuranceForm_submitButton">
							</div>
						</form>
			          </div>
			        </li>
					
<!-- Tab for account functions -->
			        <li>
			          <input type="radio" name="tabs" id="tab-account">
			          <label for="tab-account" id="tab-account-label">Fiókom</label>
			          <div id="tab-content-account" class="tab-content animated fadeIn">
						<table class="content">
							<tr>
								<td width="20%">
									<p>Kijelentkezés</p>
									<button type="button" id="logout_button" onclick="javascript:pageScript.logout()">Logout</button>
									<hr/>
									<p>Adataim megjelenítése</p>
									<button type="button" id="melink" onclick="pageScript.ajaxget('/v1/users/me',pageScript.myCallback)">Adataim</button>
								</td>
								<td width="15px">
									<div class="msg" id="me_Msg" style="max-width: 600px;"></div>
								</td>	
							</tr>
						</table>

						<hr/>
						
						<p>Titkos kód cseréje/hozzáadása</p>
						<p class="warning">Figyelmeztetés! A titkosított kód megváltoztatásával a felhasználó összes eddigi SSO tanusítása elvész.</p>
						<p class="note">A személyi számot nem tárolja a rendszer. Egy titkosított kódot generálunk belőle, amiből a személyi szám nem nyerhető vissza.</p>
						<form id="ChangeHashForm" action="javascript:pageScript.changeHash()" method="post" name="addAssurance">
							<div class="formrow">
								<div class="label" id="ChangeHashForm_predigest_label">
								személyi szám:
								</div>
								<input name="digest" type="text" id="ChangeHashForm_predigest_input"></input>
								<button type="button" id="ChangeHashForm_getDigestButton" onclick="pageScript.digestGetter('ChangeHashForm').getDigest()">Titkos kód előállítása</button>
							</div>
							<div id="ChangeHashForm_errorMsg"></div>
							<div class="formrow">
								<div class="label" id="ChangeHashForm_digest_label">
								titkosított kód:
								</div>
								<textarea class="digest" name="digest" type="text" id="ChangeHashForm_digest_input" rows="5"></textarea>
							</div>
							<div class="formrow">
								<input type="submit" value="A titkosított kód mentése" id="ChangeHashForm_submitButton"></input>
							</div>
						</form>
						<div id="ChangeHashForm_ErrorMsg"></div>
						
						<hr/>

						<p>E-mail cím megváltoztatása</p>
						<form id="ChangeEmailAddressForm" action="javascript:pageScript.changeEmailAddress()" method="post" name="changeEmail">
							<table class="content">
								<tr>
									<td width="65%" >
										<p class="note" >
											A jelszócsere kezdeményezését követően a felhasználó egy validáló e-mailt kap. 
											Az abban lévő linkre kattintva ellenőrzötté válik az e-mail cím. 
											Bizonyos szolgáltatások csak ellenőrzött e-mail címmel érhetők el.
										<p>
									</td>
									<td width="25%">
										<div class="label" id="ChangeEmailAddressForm_email_label">
											új email cím:
										</div>
										<input name="email" type="text" id="ChangeEmailAddressForm_email_input"></input>
									</td>
									<td>								
										<input type="submit" class="button" value="Cserélem" id="ChangeEmailAddressForm_submitButton" >
										</input>
									</td>
								</tr>
							</form>
						</table>
						<div id="ChangeEmailAddressForm_ErrorMsg"></div>
						<hr/>						
	
						<div id="InitiateResendRegistrationEmail_Container">
						<p>Regisztrációs/validáló email újraküldése</p>
						<table class="content">
							<tr>
								<td width="90%" >
									<p class="note" >
										A gombra kattintva kezdeményezhető a regisztrációs email újraküldése. 
										A rendszer e-mailben elküldi az aktíváló kódot, 
										a levélben található linkre kattintva visszajutsz ide, így aktiválódik a fiókod.
									<p>
								</td>
								<td>								
									<button class="button" type="button" id="RegistrationEmailResendForm_InitiateResendRegistrationEmail" onclick="pageScript.InitiateResendRegistrationEmail()">
										Kérem a levelet
									</button>
								</td>
							</tr>
						</table>
						<div id="InitiateResendRegistrationEmail_ErrorMsg"></div>
						<hr/>
						</div>
						
					
						<p>Jelszó csere</p>
						<table class="content">
							<tr>
								<td width="90%" >
									<p class="note" >
										A gombra kattintva kezdeményezhető a jelszó cseréje. 
										A rendszer e-mailben elküldi az aktíváló kódot, 
										a levélben található linkre kattintva visszajutsz ide, és megadhatod az új jelszót.
									<p>
								</td>
								<td>								
									<button class="button" type="button" id="PasswordResetForm_InitiatePasswordReset" onclick="pageScript.InitiatePasswordReset()">
										Új jelszót szeretnék
									</button>
								</td>
							</tr>
							<tr>
								<td colspan="5">
									<div id="InitiatePasswordReset_ErrorMsg"></div>
								</td>
							</tr>
						</table>
						<form id="PasswordResetForm" action="javascript:pageScript.passwordReset()" method="post" name="PasswordResetForm">
							<table class="content" width="100%">
								<tr>
									<td width="65%">
										<div class="label" id="PasswordResetForm_secret_input_label">
											Az e-mailből jövő titok:
										</div>
										<input style="width:100%" name="secret" type="text" id="PasswordResetForm_secret_input" disabled/>
									</td>
									<td width="25%">
										<div class="label" id="PasswordResetForm_password_label">
											Új jelszó:
										</div>
										<input name="password" type="password" id="PasswordResetForm_password_input"/>
									</td>
									<td>
										<input class="button "type="submit" value="Cserélem" id="PasswordResetForm_submitButton">
									</td>
								</tr>
							</table>
						</form>
						<div id="PasswordResetForm_ErrorMsg"></div>
						
						<hr/>
						
						<p>Fiók törlése</p>
						<form id="DeRegisterForm" action="javascript:pageScript.deRegister()" method="post" name="deRegister">
							<table class="content" width="100%">
								<tr>
									<td width="65%">
										<p class="note" >
											A fiók törlésével a felhasználó összes felhasználói adata, tanusítványa, belépési jogosultsága törlődni fog.
											A gomb megnyomásával ezzel a fiókkal sem az SSO felületére, sem azokra a weboldalakra nem lehet majd belépni, 
											amelyekbe az SSO szolgáltatás segítségével regisztráltak.
										</p>
									</td>
									<td width="25%">
										<div class="label" id="DeRegisterForm_password_label">
											Jelszó:
										</div>
										<input name="password" type="password" id="DeRegisterForm_password_input"/>
									</td>
									<td width="10%">
										<input class="Button" type="submit" value="Törlöm a fiókom" id="DeRegisterForm_submitButton"></input>
									</td>
								</tr>
							</table>
							<div id="DeRegisterForm_ErrorMsg"></div>
						</form>
			          </div>
					</li>

<!-- Tab for registering applications -->
			        <li>
						<input type="radio" name="tabs" id="tab-app">
						<label for="tab-app" id="tab-app-label">Alkalmazások</label>
						<div id="tab-content-app" class="tab-content animated fadeIn">
							<p>Alkalmazás regisztrációja</p>
							<p class="note">
								Input:
							</p>
							<ul>
								<li>Alkalmazás neve</li>
								<li>callback URL</li>
							</ul>
							<p class="note">
								Output:
							</p>
							<ul>
								<li>Alkamazás ID</li>
								<li>Alkalmazás secret</li>
							</ul>
						</div>

					</li>
					
			    </ul>
	      	</div>
			<div id="qunit-xml" class="message_container"></div>
</body>
</html>
